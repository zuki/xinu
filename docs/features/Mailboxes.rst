メールボックス
==============

XINUにおいて **メールボックス** とは、プロセス間通信に使用される
メッセージングキューのことです。メールボックスを
:source:`send() <system/send.c>` と
:source:`receive() <system/receive.c>` を使用するスレッド制御
ブロックに組み込まれた :doc:`メッセージパッシング <Message-Passing>`
機能と混同してはいけません。

XINUでは有限個のメールボックスを作成することができます。各メール
ボックスは番号で識別されます。プロセスが正しいメールボックス番号を
知っている限り、どのような数のプロセスでもメールボックスで
メッセージを送受信することができます。

新しいメールボックスを作成する（割り当てる）際、キューが
許容するメッセージの最大数を指定しなければなりません。メールボックスの
作成される際にメッセージ用のメモリが割り当てられます。メールボックス
メッセージキューが一杯になった場合、メッセージを送信しようとする
プロセスはキューに空きができるのを待つ必要があります。キューが空の
場合、メッセージを受信しようとするプロセスはメッセージがエンキュー
されるのを待つ必要があります。メッセージは4バイト長（``int`` 型）です。

メールボックスが削除されるとキューに残っているメッセージはすべて
破棄されます。送受信するために待機中のプロセスは待ち状態から解放
されます。
